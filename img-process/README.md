# 按功能部分讲解

### 图像旋转
> `rotate.py`
* 读入图像，转为灰度图,Canny变换,霍夫变换,从而得到图中所有直线的长度
* 求每条直线的角度,得到倾斜角度`theta`,如果倾斜角度在-45度和+45度之间,则认为其是一个有效的角度,同时累加求平均值
* 根据平均倾斜度对图像旋转
* 对旋转后的黑边填充白色
* 保存路径下每张图

### 图片分类
> `classify.py`
* 读入旋转之后的图像，转为灰度图，二值化
* 形态学操作得到横线竖线，并进行与运算(and)得到表格
* 找到轮廓并计算其个数，将其与两个不同的阀值比较从而分出三种不同类别的图片表格图(t)，无表格图(n)，虚线表格图(d)
* 将图片重命名并保存到新路径下

### 图像分割（单元格分割）
>`segment_img.py`
* 读入已分类的图片
* 如果是虚线图，则将虚线拟合成直线后拟合表格并提取单元格
* 如果是表格图，则直接拟合表格并提取单元格
* 如果是无表格图，则拟合表格并提取单元格后进一步操作，包括提取表头，删除过大轮廓的单元格以及删除被包含的单元格
* 对每种图像设定不同的阀值
* 根据类型和轮廓数量判断单元格是否有文本，在有文本的条件下将提取出的每个单元格高度与阀值进行对比，得出此单元格为单行或多行文本
* 对于表格图或虚线图每个单元格向下多取8个像素
* 将每张图的每个单元格信息写入文本，格式：文件名+单行或多行文本标记+单元格坐标(x,y,w,h) 
e.g. `297875_14807710-d-000.png SingleText (1139, 1915, 60, 35)`
* 将每个单元格保存为图片

